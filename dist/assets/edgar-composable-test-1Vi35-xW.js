import{Z as J,l as W,r as p,c as N,o as Y,n as y,q as C,v as e,i as t,C as h,A as s,X as d,y as k,N as I}from"./index-XfzghrTN.js";import Z from"./useNotify-CNR52NHZ.js";import{u as ee}from"./useAuth-CpsKkO3P.js";import{u as te}from"./useEdgarTenK-CwKF01ya.js";import{b as z}from"./route-block-B_A1xBdJ.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as i,a as u,b as g,c as x,d as D}from"./VCard-BECKUIfU.js";import{V as ae}from"./VContainer-R6qPkMgO.js";import{V as b}from"./VBtn-DyMKmmJZ.js";import{V as oe}from"./VTextField-DrQV8GZt.js";import{j}from"./VAvatar-DrNrBBh9.js";import{V}from"./VAlert-BXOlNWtC.js";import{V as re}from"./VDataTable-ClKBkycv.js";import{V as se}from"./VChip-CdDlcFnE.js";import{V as ne}from"./VSheet-Braltggs.js";import"./dimensions-BTn1Zqj3.js";import"./forwardRefs--s6B5EbG.js";import"./index-CT5Z8H4E.js";import"./VSelect-7OPIFvbh.js";import"./VList-uSYSyOiG.js";import"./ssrBoot-CEib-DlM.js";import"./VOverlay-CuvIps3-.js";import"./scopeId-JKcj2l0q.js";import"./lazy-CW5rMfy1.js";import"./VSelectionControl-CgJ3t_n0.js";const ue={style:{"white-space":"pre-wrap","word-wrap":"break-word","max-height":"400px","overflow-y":"auto","font-size":"12px"}},ie={style:{"white-space":"pre-wrap","word-wrap":"break-word","max-height":"400px","overflow-y":"auto","font-size":"12px"}},de="Edgar Composable Test",P={__name:"edgar-composable-test",setup(fe){J();const v=Z(),S=W(),f=p(""),c=p(!1),m=p(!1),A=p(!1),L=p(!1),K=p(!1),n=p(null),w=p(""),$=p(""),_=p(null),r=p(""),{fetchTenKReports:F}=te(),B=[{title:"Filing Date",key:"filingDate",sortable:!0},{title:"Report Date",key:"reportDate",sortable:!0},{title:"Accession Number",key:"accessionNumber",sortable:!1},{title:"Primary Document",key:"primaryDocument",sortable:!1},{title:"XBRL",key:"isXBRL",sortable:!0},{title:"File Size",key:"size",sortable:!0},{title:"File Number",key:"fileNumber",sortable:!1}],E=N(()=>S.current.value.dark?"bg-charcoal":"bg-parchment"),Q=N(()=>S.current.value.dark?"text-stone-gray":"text-secondary"),R=a=>a?new Date(a).toLocaleDateString():"",M=a=>a?`${(a/(1024*1024)).toFixed(1)} MB`:"";ee();const X={title:"Edgar Composable Test"},O=async()=>{A.value=!0,r.value="";try{r.value=`Testing multiProjectDAL status...

`,r.value+=`DAL initialized: ${multiProjectDAL.initialized}
`,r.value+=`Active project: ${multiProjectDAL.getActiveProjectId()}
`,r.value+=`Loaded projects: ${multiProjectDAL.getLoadedProjects().join(", ")}

`,await multiProjectDAL.initialize(),r.value+=`DAL initialization completed
`,v.success("DAL status check completed")}catch(a){r.value+=`DAL Error: ${a.message}
`,v.error(`DAL Error: ${a.message}`)}finally{A.value=!1}},U=async()=>{L.value=!0;try{r.value=`Testing collection access...

`;const a=await multiProjectDAL.getAllItems("dataFiliteredCompanyList",[],"operational");if(r.value+=`Collection 'dataFiliteredCompanyList' found
`,r.value+=`Total records: ${a.length}

`,a.length>0){r.value+=`Sample record structure:
`,r.value+=JSON.stringify(a[0],null,2)+`

`;const l=a.filter(o=>o.hasOwnProperty("cik"));r.value+=`Records with 'cik' field: ${l.length}
`,l.length>0&&(r.value+=`Sample CIK values and types:
`,l.slice(0,5).forEach((o,T)=>{r.value+=`  ${T+1}. CIK: ${o.cik} (${typeof o.cik}) - ${o.Company||"Unknown"}
`}))}v.success(`Collection access successful - ${a.length} records found`)}catch(a){r.value+=`Collection Error: ${a.message}
`,v.error(`Collection Error: ${a.message}`)}finally{L.value=!1}},q=async()=>{K.value=!0;try{r.value+=`
Testing static CIK query...

`;const a=320193;r.value+=`Searching for CIK: ${a} (${typeof a})
`;const l=await multiProjectDAL.getAllItems("dataFiliteredCompanyList",[where("cik","==",a)],"operational");r.value+=`Query result: ${l.length} records found
`,l.length>0?(r.value+=`Found records:
`,l.forEach((o,T)=>{r.value+=`  ${T+1}. ${o.Company} (${o.Ticker}) - CIK: ${o.cik}
`})):r.value+=`No records found with CIK 320193
`,v.info(`Query completed - ${l.length} records found`)}catch(a){r.value+=`Query Error: ${a.message}
`,v.error(`Query Error: ${a.message}`)}finally{K.value=!1}},G=async()=>{if(f.value){c.value=!0,n.value=null,w.value="",_.value=null,$.value=String(f.value).padStart(10,"0");try{const a=await F(f.value);n.value=a,a.length>0?v.success(`Successfully fetched ${a.length} 10-K reports for CIK ${$.value}`):v.info(`No 10-K reports found for CIK ${$.value}`)}catch(a){console.error("Error testing composable:",a),w.value=a.message,v.error(`Error: ${a.message}`)}finally{c.value=!1}}},H=async()=>{if(!(!n.value||n.value.length===0||!f.value)){m.value=!0,w.value="",_.value=null;try{const a=parseInt(f.value.trim(),10);if(isNaN(a))throw new Error(`Invalid CIK format: ${f.value}`);const l=await multiProjectDAL.getAllItems("dataFiliteredCompanyList",[where("cik","==",a)],"operational");if(l.length===0)throw new Error(`No company record found for CIK ${a}`);if(l.length>1)throw new Error(`Multiple company records found for CIK ${a}`);const o=l[0];await multiProjectDAL.updateItem("dataFiliteredCompanyList",o.id,{tenKReports:n.value,tenKReportsUpdatedAt:new Date().toISOString()},"operational"),_.value={Company:o.Company,Ticker:o.Ticker},v.success(`Saved ${n.value.length} 10-K reports to ${o.Company} (${o.Ticker}) record`)}catch(a){console.error("Error saving to database:",a),w.value=a.message,v.error(`Database Error: ${a.message}`)}finally{m.value=!1}}};return Y(()=>{document.title=X.title}),(a,l)=>(C(),y(ne,{class:"flex-grow-1 d-flex flex-column",flat:"",rounded:"",color:"surface"},{default:e(()=>[t(i,{class:"flex-grow-1 ma-0"},{default:e(()=>[t(u,{class:"d-flex flex-column pa-0"},{default:e(()=>[t(g,{class:h(["flex-grow-1","d-flex","flex-column",E.value]),flat:"",border:0},{default:e(()=>[t(x,{class:"flex-grow-1",style:{"overflow-y":"auto"},border:0},{default:e(()=>[t(ae,{fluid:""},{default:e(()=>[t(i,null,{default:e(()=>[t(u,{cols:"2"},{default:e(()=>[t(g,{variant:"text",class:h([Q.value,"text-h5",E.value]),border:0},{default:e(()=>[s(d(de||"Loading..."),1)]),_:1},8,["class"])]),_:1})]),_:1}),t(i,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(g,{class:"bg-surface",variant:"outlined"},{default:e(()=>[t(D,{class:"text-secondary"},{default:e(()=>[...l[5]||(l[5]=[s("Debug Database Connection",-1)])]),_:1}),t(x,null,{default:e(()=>[t(i,null,{default:e(()=>[t(u,{cols:"12",class:"d-flex gap-2"},{default:e(()=>[t(b,{color:"info",onClick:O,loading:A.value,disabled:A.value},{default:e(()=>[...l[6]||(l[6]=[s(" Test DAL Status ",-1)])]),_:1},8,["loading","disabled"]),t(b,{color:"warning",onClick:U,loading:L.value,disabled:L.value},{default:e(()=>[...l[7]||(l[7]=[s(" Test Collection Access ",-1)])]),_:1},8,["loading","disabled"]),t(b,{color:"error",onClick:q,loading:K.value,disabled:K.value},{default:e(()=>[...l[8]||(l[8]=[s(" Test CIK Query ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),r.value?(C(),y(i,{key:0},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(g,{variant:"outlined",class:"mt-4"},{default:e(()=>[t(D,{class:"text-secondary"},{default:e(()=>[...l[9]||(l[9]=[s("Debug Information",-1)])]),_:1}),t(x,null,{default:e(()=>[I("pre",ue,d(r.value),1)]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(i,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(g,{class:"bg-surface",variant:"outlined"},{default:e(()=>[t(D,{class:"text-secondary"},{default:e(()=>[...l[10]||(l[10]=[s("Test useEdgarTenK Composable",-1)])]),_:1}),t(x,null,{default:e(()=>[t(i,null,{default:e(()=>[t(u,{cols:"6"},{default:e(()=>[t(oe,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=o=>f.value=o),label:"Enter CIK",placeholder:"e.g. 320193 for Apple",variant:"outlined",disabled:c.value||m.value},null,8,["modelValue","disabled"])]),_:1}),t(u,{cols:"6",class:"d-flex align-center ga-2"},{default:e(()=>[t(b,{color:"primary",onClick:G,loading:c.value,disabled:c.value||m.value||!f.value},{default:e(()=>[...l[11]||(l[11]=[s(" Fetch 10-K Reports ",-1)])]),_:1},8,["loading","disabled"]),t(b,{color:"success",onClick:H,loading:m.value,disabled:c.value||m.value||!n.value||n.value.length===0},{default:e(()=>[...l[12]||(l[12]=[s(" Save Results ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(i,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(g,{variant:"flat",class:"bg-info-lighten-4 pa-2"},{default:e(()=>[l[17]||(l[17]=I("strong",null,"Quick Test CIKs:",-1)),t(b,{variant:"text",size:"small",onClick:l[1]||(l[1]=o=>f.value="320193"),disabled:c.value||m.value},{default:e(()=>[...l[13]||(l[13]=[s("Apple (320193)",-1)])]),_:1},8,["disabled"]),t(b,{variant:"text",size:"small",onClick:l[2]||(l[2]=o=>f.value="789019"),disabled:c.value||m.value},{default:e(()=>[...l[14]||(l[14]=[s("Microsoft (789019)",-1)])]),_:1},8,["disabled"]),t(b,{variant:"text",size:"small",onClick:l[3]||(l[3]=o=>f.value="1652044"),disabled:c.value||m.value},{default:e(()=>[...l[15]||(l[15]=[s("Google (1652044)",-1)])]),_:1},8,["disabled"]),t(b,{variant:"text",size:"small",onClick:l[4]||(l[4]=o=>f.value="1018724"),disabled:c.value||m.value},{default:e(()=>[...l[16]||(l[16]=[s("Amazon (1018724)",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),c.value?(C(),y(i,{key:0},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(j,{indeterminate:"",color:"primary"}),t(g,{variant:"flat",class:"text-center pa-2"},{default:e(()=>[...l[18]||(l[18]=[s("Fetching 10-K reports...",-1)])]),_:1})]),_:1})]),_:1})):k("",!0),m.value?(C(),y(i,{key:1},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(j,{indeterminate:"",color:"success"}),t(g,{variant:"flat",class:"text-center pa-2"},{default:e(()=>[...l[19]||(l[19]=[s("Saving to database...",-1)])]),_:1})]),_:1})]),_:1})):k("",!0),w.value?(C(),y(i,{key:2},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(V,{type:"error",variant:"outlined"},{default:e(()=>[s(d(w.value),1)]),_:1})]),_:1})]),_:1})):k("",!0),_.value?(C(),y(i,{key:3},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(V,{type:"success",variant:"outlined"},{default:e(()=>[l[20]||(l[20]=I("strong",null,"Success!",-1)),s(" Saved "+d(n.value.length)+" 10-K reports to "+d(_.value.Company)+" ("+d(_.value.Ticker)+") record ",1)]),_:1})]),_:1})]),_:1})):k("",!0),n.value&&n.value.length>0?(C(),y(i,{key:4},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(g,{variant:"outlined",class:"mt-4"},{default:e(()=>[t(D,{class:"text-secondary"},{default:e(()=>[s(" Most Recent "+d(n.value.length)+" 10-K Reports (CIK: "+d($.value)+") ",1)]),_:1}),t(x,null,{default:e(()=>[t(re,{headers:B,items:n.value,"items-per-page":5,class:"elevation-1"},{"item.filingDate":e(({item:o})=>[s(d(R(o.filingDate)),1)]),"item.reportDate":e(({item:o})=>[s(d(R(o.reportDate)),1)]),"item.isXBRL":e(({item:o})=>[t(se,{color:o.isXBRL?"success":"warning",size:"small"},{default:e(()=>[s(d(o.isXBRL?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.size":e(({item:o})=>[s(d(M(o.size)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0),n.value&&n.value.length===0&&!c.value&&!w.value?(C(),y(i,{key:5},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(V,{type:"info",variant:"outlined"},{default:e(()=>[s(" No 10-K reports found for CIK: "+d($.value),1)]),_:1})]),_:1})]),_:1})):k("",!0),n.value&&n.value.length>0?(C(),y(i,{key:6},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(g,{variant:"outlined",class:"mt-4"},{default:e(()=>[t(D,{class:"text-secondary"},{default:e(()=>[...l[21]||(l[21]=[s("Raw Composable Response",-1)])]),_:1}),t(x,null,{default:e(()=>[I("pre",ie,d(JSON.stringify(n.value,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}))}};typeof z=="function"&&z(P);const ze=le(P,[["__scopeId","data-v-4e98b3d8"]]);export{ze as default};
