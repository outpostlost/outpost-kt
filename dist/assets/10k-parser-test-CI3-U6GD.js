import{Z as K,l as $,r as h,c as C,o as D,n as A,q as F,v as s,i as e,C as B,y as N,A as u,X as c}from"./index-XfzghrTN.js";import M from"./useNotify-CNR52NHZ.js";import{b as E}from"./route-block-B_A1xBdJ.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as v,a as m,b as p,c as _,d as y}from"./VCard-BECKUIfU.js";import{V as j}from"./VContainer-R6qPkMgO.js";import{V as G}from"./VTextField-DrQV8GZt.js";import{V as J}from"./VBtn-DyMKmmJZ.js";import{V as S}from"./VChip-CdDlcFnE.js";import{V as H,a as w,b as V,c as k}from"./VExpansionPanels-Cmix9OAe.js";import{V as g}from"./VTextarea-kSkycfnj.js";import{V as q}from"./VSheet-Braltggs.js";import"./VAvatar-DrNrBBh9.js";import"./dimensions-BTn1Zqj3.js";import"./forwardRefs--s6B5EbG.js";import"./index-CT5Z8H4E.js";import"./lazy-CW5rMfy1.js";async function X(x){try{console.log("Calling parse-10k API with URL:",x);const r=await fetch("/api/parse-10k",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:x})}),d=await r.json();if(!r.ok)throw new Error(d.error||`HTTP error! status: ${r.status}`);return console.log("Parse-10k API response:",d.success?"Success":"Failed"),d}catch(r){return console.error("Error calling parse-10k API:",r),{success:!1,error:r.message,url:x,sections:{item1Business:{title:"Item 1. Business",rawHtml:"",cleanText:`Error: ${r.message}`,found:!1},item1ARiskFactors:{title:"Item 1A. Risk Factors",rawHtml:"",cleanText:`Error: ${r.message}`,found:!1}}}}}const I="10-K Parser Test",z={__name:"10k-parser-test",setup(x){K();const r=M(),d=$(),f=h("https://www.sec.gov/Archives/edgar/data/320193/000032019323000106/aapl-20230930.htm"),T=h(!1),o=h(null),P=C(()=>d.current.value.dark?"bg-charcoal":"bg-parchment"),L=C(()=>d.current.value.dark?"text-stone-gray":"text-secondary"),U=async()=>{var R,n,l,a;if(!f.value){r.error("Please enter a filing URL");return}T.value=!0,o.value=null;try{r.info("Starting document parse...");const t=await X(f.value);if(o.value=t,t.success){const i=(n=(R=t.sections)==null?void 0:R.item1Business)==null?void 0:n.found,b=(a=(l=t.sections)==null?void 0:l.item1ARiskFactors)==null?void 0:a.found;i&&b?r.success("Both sections parsed successfully!"):i||b?r.warning("Partial parsing success - check results below"):r.error("No sections found - check parsing logic")}else r.error(`Parse failed: ${t.error}`)}catch(t){console.error("Parse error:",t),r.error(`Parse error: ${t.message}`),o.value={success:!1,error:t.message,url:f.value}}finally{T.value=!1}};return D(()=>{document.title=I}),(R,n)=>(F(),A(q,{class:"flex-grow-1 d-flex flex-column",flat:"",rounded:"",color:"surface"},{default:s(()=>[e(v,{class:"flex-grow-1 ma-0"},{default:s(()=>[e(m,{class:"d-flex flex-column pa-0"},{default:s(()=>[e(p,{class:B(["flex-grow-1","d-flex","flex-column",P.value]),flat:"",border:0},{default:s(()=>[e(_,{class:"flex-grow-1",style:{"overflow-y":"auto"},border:0},{default:s(()=>[e(j,{fluid:""},{default:s(()=>[e(v,null,{default:s(()=>[e(m,{cols:"2"},{default:s(()=>[e(p,{variant:"text",class:B([L.value,"text-h5",P.value]),border:0},{default:s(()=>[u(c(I))]),_:1},8,["class"])]),_:1})]),_:1}),e(v,null,{default:s(()=>[e(m,{cols:"12"},{default:s(()=>[e(p,{class:"bg-surface",variant:"outlined"},{default:s(()=>[e(y,{class:"text-secondary"},{default:s(()=>[...n[1]||(n[1]=[u("10-K Filing URL",-1)])]),_:1}),e(_,null,{default:s(()=>[e(G,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=l=>f.value=l),label:"SEC EDGAR 10-K URL",variant:"outlined",readonly:"",hint:"Static test URL for Apple 10-K filing","persistent-hint":""},null,8,["modelValue"]),e(J,{color:"primary",loading:T.value,disabled:!f.value,onClick:U,class:"mt-4"},{default:s(()=>[...n[2]||(n[2]=[u(" Parse Document ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),o.value?(F(),A(v,{key:0},{default:s(()=>[e(m,{cols:"6"},{default:s(()=>[e(p,{class:"bg-surface",variant:"outlined"},{default:s(()=>[e(y,{class:"text-secondary"},{default:s(()=>{var l,a;return[n[3]||(n[3]=u(" Item 1. Business Section ",-1)),e(S,{color:(a=(l=o.value.sections)==null?void 0:l.item1Business)!=null&&a.found?"success":"error",size:"small",class:"ml-2"},{default:s(()=>{var t,i;return[u(c((i=(t=o.value.sections)==null?void 0:t.item1Business)!=null&&i.found?"Found":"Not Found"),1)]}),_:1},8,["color"])]}),_:1}),e(_,null,{default:s(()=>[e(H,null,{default:s(()=>[e(w,null,{default:s(()=>[e(V,null,{default:s(()=>{var l,a,t;return[u("Clean Text ("+c(((t=(a=(l=o.value.sections)==null?void 0:l.item1Business)==null?void 0:a.cleanText)==null?void 0:t.length)||0)+" chars)",1)]}),_:1}),e(k,null,{default:s(()=>{var l,a;return[e(g,{"model-value":((a=(l=o.value.sections)==null?void 0:l.item1Business)==null?void 0:a.cleanText)||"No content",readonly:"",variant:"outlined",rows:"10","no-resize":""},null,8,["model-value"])]}),_:1})]),_:1}),e(w,null,{default:s(()=>[e(V,null,{default:s(()=>{var l,a,t;return[u("Raw HTML ("+c(((t=(a=(l=o.value.sections)==null?void 0:l.item1Business)==null?void 0:a.rawHtml)==null?void 0:t.length)||0)+" chars)",1)]}),_:1}),e(k,null,{default:s(()=>{var l,a;return[e(g,{"model-value":((a=(l=o.value.sections)==null?void 0:l.item1Business)==null?void 0:a.rawHtml)||"No content",readonly:"",variant:"outlined",rows:"8","no-resize":""},null,8,["model-value"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{cols:"6"},{default:s(()=>[e(p,{class:"bg-surface",variant:"outlined"},{default:s(()=>[e(y,{class:"text-secondary"},{default:s(()=>{var l,a;return[n[4]||(n[4]=u(" Item 1A. Risk Factors Section ",-1)),e(S,{color:(a=(l=o.value.sections)==null?void 0:l.item1ARiskFactors)!=null&&a.found?"success":"error",size:"small",class:"ml-2"},{default:s(()=>{var t,i;return[u(c((i=(t=o.value.sections)==null?void 0:t.item1ARiskFactors)!=null&&i.found?"Found":"Not Found"),1)]}),_:1},8,["color"])]}),_:1}),e(_,null,{default:s(()=>[e(H,null,{default:s(()=>[e(w,null,{default:s(()=>[e(V,null,{default:s(()=>{var l,a,t;return[u("Clean Text ("+c(((t=(a=(l=o.value.sections)==null?void 0:l.item1ARiskFactors)==null?void 0:a.cleanText)==null?void 0:t.length)||0)+" chars)",1)]}),_:1}),e(k,null,{default:s(()=>{var l,a;return[e(g,{"model-value":((a=(l=o.value.sections)==null?void 0:l.item1ARiskFactors)==null?void 0:a.cleanText)||"No content",readonly:"",variant:"outlined",rows:"10","no-resize":""},null,8,["model-value"])]}),_:1})]),_:1}),e(w,null,{default:s(()=>[e(V,null,{default:s(()=>{var l,a,t;return[u("Raw HTML ("+c(((t=(a=(l=o.value.sections)==null?void 0:l.item1ARiskFactors)==null?void 0:a.rawHtml)==null?void 0:t.length)||0)+" chars)",1)]}),_:1}),e(k,null,{default:s(()=>{var l,a;return[e(g,{"model-value":((a=(l=o.value.sections)==null?void 0:l.item1ARiskFactors)==null?void 0:a.rawHtml)||"No content",readonly:"",variant:"outlined",rows:"8","no-resize":""},null,8,["model-value"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):N("",!0),o.value?(F(),A(v,{key:1},{default:s(()=>[e(m,{cols:"12"},{default:s(()=>[e(p,{class:"bg-surface",variant:"outlined"},{default:s(()=>[e(y,{class:"text-secondary"},{default:s(()=>[...n[5]||(n[5]=[u("Full API Response",-1)])]),_:1}),e(_,null,{default:s(()=>[e(g,{"model-value":JSON.stringify(o.value,null,2),readonly:"",variant:"outlined",rows:"12","no-resize":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}))}};typeof E=="function"&&E(z);const me=O(z,[["__scopeId","data-v-7f1d66ad"]]);export{me as default};
