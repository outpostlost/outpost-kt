import{k as U,r as s,o as F,n as y,q as c,v as t,i as l,A as u,$ as D,y as M,z as m,Y as N}from"./index-XfzghrTN.js";import{u as _}from"./useAuth-CpsKkO3P.js";import B from"./useNotify-CNR52NHZ.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $}from"./VMain-CUtZqLON.js";import{V as z}from"./VContainer-R6qPkMgO.js";import{V as j,a as I,d as x,b as K,c as O,e as W}from"./VCard-BECKUIfU.js";import{V as Y}from"./VForm-D4DxYAg7.js";import{V as b}from"./VTextField-DrQV8GZt.js";import{V as p}from"./VBtn-DyMKmmJZ.js";import{V as G}from"./VAlert-BXOlNWtC.js";import{V as H}from"./VDialog-BmHzJSMr.js";import{V as J}from"./VSpacer-DV0-RfCV.js";import"./dimensions-BTn1Zqj3.js";import"./ssrBoot-CEib-DlM.js";import"./VAvatar-DrNrBBh9.js";import"./forwardRefs--s6B5EbG.js";import"./index-CT5Z8H4E.js";import"./VOverlay-CuvIps3-.js";import"./scopeId-JKcj2l0q.js";import"./lazy-CW5rMfy1.js";const Q={__name:"login",setup(X){const C=U(),k=B(),{loginUser:P,resetPassword:R,isLoading:d}=_();s(null);const v=s(null),E=s(null),f=s(!1),n=s(!1),V=s(!1),g=s(!1),r=s({email:"",password:""}),i=s(""),q={title:"Login"},w=[a=>!!a||"Email is required",a=>/.+@.+\..+/.test(a)||"Email must be valid"],A=[a=>!!a||"Password is required",a=>a.length>=1||"Password is required"],L=async()=>{if(!f.value)return;g.value=!1;const a=await P(r.value.email,r.value.password);a.success?C.push(a.redirectTo):g.value=!0},T=async()=>{if(!i.value||!/.+@.+\..+/.test(i.value)){k.error("Please enter a valid email address");return}V.value=!0;const a=await R(i.value);V.value=!1,a.success&&(n.value=!1,i.value="")};return F(()=>{var a;v.value=q,(a=v.value)!=null&&a.title&&(document.title=v.value.title)}),(a,e)=>(c(),y(N,null,{default:t(()=>[l($,null,{default:t(()=>[l(z,{fluid:"",class:"fill-height"},{default:t(()=>[l(j,{justify:"center",align:"center",class:"fill-height"},{default:t(()=>[l(I,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"},{default:t(()=>[l(x,{class:"text-center text-h4 mb-8 pa-0"},{default:t(()=>[...e[7]||(e[7]=[u(" Welcome to Outpost KT ",-1)])]),_:1}),l(Y,{ref_key:"loginForm",ref:E,modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),onSubmit:D(L,["prevent"])},{default:t(()=>[l(b,{modelValue:r.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.email=o),label:"Email",type:"email",rules:w,disabled:m(d),required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue","disabled"]),l(b,{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.password=o),label:"Password",type:"text",rules:A,disabled:m(d),required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue","disabled"]),l(p,{type:"submit",color:"primary",block:"",loading:m(d),disabled:!f.value||m(d),size:"large",class:"mb-4"},{default:t(()=>[...e[8]||(e[8]=[u(" Login ",-1)])]),_:1},8,["loading","disabled"]),g.value?(c(),y(G,{key:0,type:"error",variant:"tonal",class:"mb-4",text:"Login failed. Please check your credentials and try again."})):M("",!0),l(p,{variant:"text",color:"primary",block:"",disabled:m(d),onClick:e[2]||(e[2]=o=>n.value=!0)},{default:t(()=>[...e[9]||(e[9]=[u(" Forgot Password? ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(H,{modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=o=>n.value=o),"max-width":"400"},{default:t(()=>[l(K,null,{default:t(()=>[l(x,null,{default:t(()=>[...e[10]||(e[10]=[u("Reset Password",-1)])]),_:1}),l(O,null,{default:t(()=>[l(b,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),label:"Email Address",type:"email",rules:w,variant:"outlined"},null,8,["modelValue"])]),_:1}),l(W,null,{default:t(()=>[l(J),l(p,{variant:"text",onClick:e[5]||(e[5]=o=>n.value=!1)},{default:t(()=>[...e[11]||(e[11]=[u("Cancel",-1)])]),_:1}),l(p,{color:"primary",loading:V.value,onClick:T},{default:t(()=>[...e[12]||(e[12]=[u(" Send Reset Email ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},ye=S(Q,[["__scopeId","data-v-f6c04474"]]);export{ye as default};
